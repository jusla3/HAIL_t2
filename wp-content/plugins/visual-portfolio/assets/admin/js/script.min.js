!function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}({10:function(e,t){function a(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function n(){h[_.is(":checked")?"show":"hide"]()}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=jQuery,r=window,l=r.ajaxurl,c=r.VPAdminVariables,s=r.Tooltip,d=r.CodeMirror,p=r.emmetCodeMirror,v=o("body"),m=o(window),u=o('form[name="post"]'),f=o('[name="post_type"]'),g=o("#postID").val();v.on("focus",'[name="vp_list_shortcode"], [name="vp_filter_shortcode"]',function(){this.select()}),v.on("click",".vp-onclick-selection",function(){window.getSelection().selectAllChildren(this)});var h=o("#vp_format_video"),_=o("#post-format-video");h.length&&_.length&&(n(),v.on("change","[name=post_format]",function(){n()}));var y=null,b=void 0;v.on("change input",'.vp-input[name="video_url"]',function(){null!==y&&y.abort();var e=o(this);e.next(".vp-oembed-preview").html(""),clearTimeout(b),b=setTimeout(function(){y=o.ajax({url:l,method:"GET",dataType:"json",data:{action:"vp_find_oembed",q:e.val(),nonce:c.nonce},complete:function(t){var a=t.responseJSON;a&&void 0!==a.html&&e.next(".vp-oembed-preview").html(a.html)}})},250)}),void 0!==s&&o('[data-hint]:not([data-hint=""]):not([data-hint="false"])').each(function(){var e=o(this);new s(this,{placement:e.attr("data-hint-place")||"top",title:e.attr("data-hint"),container:o("body")[0],boundariesElement:"viewport"})}),function(){function e(e,t){var a=e.find('[data-image-id="'+t+'"]'),n={id:t};return a.find("[data-additional]").each(function(){var e=o(this),t=e.attr("data-additional");if(n[t]=e.html(),"true"===e.attr("data-to-json"))try{n[t]=JSON.parse(n[t])}catch(e){n[t]=""}}),n}function t(e,t){var a=e.find('[data-image-id="'+t+'"]'),n={};return a.find("[data-meta]").each(function(){n[o(this).attr("data-meta")]=o(this).html()}),n}function n(t){var a=[];t.children(".vp-control-gallery-items").find(".vp-control-gallery-items-img").each(function(){a.push(e(t,o(this).attr("data-image-id")))});var n=JSON.stringify(a),i=t.children("textarea");n!==i.val()&&i.val(n).change()}function r(n,i){var r=n.children("textarea").attr("name"),l=n.children(".vp-control-gallery-additional-data"),c=l.children(".vp-control-gallery-additional-data-preview"),s=n.children(".vp-control-gallery-items").find('.vp-control-gallery-items-img[data-image-id="'+i+'"]'),d=e(n,i),p=t(n,i);d&&Object.keys(d).forEach(function(t){var i=l.find('[name="'+r+"_additional_"+t+'"], [name="'+r+"_additional_"+t+'[]"]').val(d[t]||"");if(i.hasClass("vp-select2")){if(i.hasClass("vp-select2-tags")){var c=[],s=[];n.children(".vp-control-gallery-items").find(".vp-control-gallery-items-img").each(function(){var i=e(n,o(this).attr("data-image-id"));i&&void 0!==i[t]&&i[t]&&(c=[].concat(a(new Set([].concat(a(c),a(i[t]))))))}),c.forEach(function(e){s.push(new window.Option(e,e,!1,!1))}),i.html(s.length?s:""),i.val(void 0!==d[t]&&d[t]?d[t]:"")}i.trigger("change")}}),c.find(".vp-control-gallery-additional-data-preview-image img").attr("src",s.children("img").attr("src")||""),c.find(".vp-control-gallery-additional-data-preview-name").html(p.filename),c.find(".vp-control-gallery-additional-data-preview-size").html(p.width+"x"+p.height+" ("+p.filesizeHumanReadable+")"),c.find(".vp-control-gallery-additional-data-preview-edit a").attr("href",p.editLink.replace("&amp;","&")),s.siblings().removeClass("active"),s.addClass("active"),l.addClass("active"),S=T.find(".vp-control-gallery-additional-data.active").length}function s(e,t){if(L&&(t=!1,L=!1),c&&c.css_editor_error_notice){var a=!1;if(1===e.length?a=c.css_editor_error_notice.singular.replace("%d","1"):e.length>1&&(a=c.css_editor_error_notice.plural.replace("%d",String(e.length))),a){var n=z.prev("#vp_custom_css_notice");if(n.length||t||(n=o('<div class="notice notice-error inline" id="vp_custom_css_notice"></div>'),z.before(n)),!n.length)return;var i='<p class="notification-message">'+a+'</p><p><input id="vp_custom_css_notice_prevent" type="checkbox"><label for="vp_custom_css_notice_prevent">'+c.css_editor_error_checkbox+"</label></p>";n.html(i)}else z.prev("#vp_custom_css_notice").remove()}}if("vp_lists"===f.val()&&u.length){var h=o(".vp-content-source"),_=h.find('[name="vp_content_source"]');h.on("click",".vp-content-source__item",function(){var e=o(this).attr("data-content");h.find('[data-content="'+e+'"]').addClass("active").siblings().removeClass("active"),_.val(e).change()}),h.children('[data-content="'+_.val()+'"]').click(),o.fn.conditionize&&u.conditionize(),o(".vp-control-range").each(function(){var e=o(this).find("input"),t=e.filter('[type="hidden"]');e.on("change input",function(a){e.val(o(this).val()),t.trigger("vp-fake-"+a.type)})}),o.fn.wpColorPicker&&o(".vp-color-picker").each(function(){function e(e){if(a)return void(a=!1);clearTimeout(t),t=setTimeout(function(){o(e.target).change()},300)}var t=void 0,a=!0;o(this).data("change",e).wpColorPicker()}),o.fn.imagepicker&&o(".vp-image-picker").imagepicker();var y=o(".vp_list_preview iframe"),b=!1,w=!1,k=o('<form target="vp_list_preview_iframe" method="post" style="display: none">').attr("action",y.attr("src")).insertAfter(u);o.fn.iFrameResize&&y.iFrameResize({interval:10});var C=void 0;u.on("change input vp-fake-change vp-fake-input",'[name*="vp_"]',function(e){var t=o(this);if(!t.closest(".vp-no-reload").length){var a={name:t.attr("name"),value:t.is("[type=checkbox], [type=radio]")?t.is(":checked"):t.val(),reload:"change"===e.type||"vp-fake-change"===e.type,jQuery:w,$portfolio:b},n=k.find('[name="'+a.name+'"]');n.length||(n=o('<input type="hidden" name="'+a.name+'" />').appendTo(k)),n.attr("value",a.value),m.trigger("vp-preview-change",a),!a.reload&&b||(clearTimeout(C),C=setTimeout(function(){w=!1,b=!1,k.submit()},400))}}),y.on("load",function(){w=this.contentWindow.jQuery,b=w(".vp-portfolio")}),m.on("vp-preview-change",function(e,t){if(t.$portfolio)switch(t.name){case"vp_layout":case"vp_tiles_type":case"vp_masonry_columns":case"vp_items_gap":var a=t.name;a=a.substring(3),a=a.replace("_","-"),t.$portfolio.attr("data-vp-"+a,t.value),t.$portfolio.vpf("init"),t.reload=!1;break;case"vp_filter_align":t.$portfolio.find(".vp-filter").removeClass("vp-filter__align-center vp-filter__align-left vp-filter__align-right").addClass("vp-filter__align-"+t.value),t.reload=!1;break;case"vp_pagination_align":t.$portfolio.find(".vp-pagination").removeClass("vp-pagination__align-center vp-pagination__align-left vp-pagination__align-right").addClass("vp-pagination__align-"+t.value),t.reload=!1;break;case"vp_custom_css":var n=t.$portfolio.closest("html"),i="vp-custom-css-"+g+"-inline-css",o=n.find("#"+i);o.length||(o=t.jQuery('<style id="'+i+'">'),n.find("body").prepend(o)),o.html(t.value),t.reload=!1;break;case"vp_list_name":case"vp_stretch":t.reload=!1}}),v.on("click",".vp-control-image-dropdown",function(e){o(e.target).closest(".vp-control-image-dropdown__content").length||o(this).toggleClass("active")}),v.on("mousedown",function(e){var t=o(e.target).closest(".vp-control-image-dropdown");o(".vp-control-image-dropdown.active").each(function(){this!==t[0]&&o(this).removeClass("active")})}),v.on("change",".vp-control-image-dropdown .vp-image-picker",function(){var e=o(this),t=e.data("picker");if(t){var a=t.select.find('option[value="'+t.select.val()+'"]'),n=a.parent("optgroup"),i=e.closest(".vp-control-image-dropdown"),r=a.attr("data-img-src");i.length&&(i.children(".vp-control-image-dropdown__preview").html('<img src="'+r+'" alt="">'),n.length&&i.children(".vp-control-image-dropdown__title").html(n.attr("label")))}});var x=o('[name="vp_list_name"]'),j=o('[name="post_title"]');x.length&&j.length&&(x.on("input",function(){j.val()!==x.val()&&j.val(x.val()).change()}),j.on("input",function(){x.val(j.val())})),o.fn.select2&&o(".vp-select2").each(function(){var e=o(this),t={width:"100%",minimumResultsForSearch:e.hasClass("vp-select2-nosearch")?-1:1,tags:e.hasClass("vp-select2-tags")},a=!!e.attr("data-post-type")&&o(e.attr("data-post-type"));e.closest(".vp-select2-posts-ajax").length&&(t=o.extend({minimumInputLength:1,ajax:{url:l,dataType:"json",delay:250,data:function(e){return{action:"vp_find_posts",q:e.term,post_type:!!a&&a.val(),nonce:c.nonce}},processResults:function(e){return{results:!(!e||!e.length)&&e}},cache:!0},escapeMarkup:function(e){return e},templateResult:function(e){if(e.loading)return e.text;var t="";e.title&&(t=e.title);var a="";e.post_type&&(a=e.post_type);var n="";return e.img&&(n="style=\"background-image: url('"+e.img+"');\""),'<div class="vp-select2-ajax__result"><div class="vp-select2-ajax__result-img" '+n+'></div><div class="vp-select2-ajax__result-data"><div class="vp-select2-ajax__result-title">'+t+'</div><div class="vp-select2-ajax__result-post-type">'+a+"</div></div></div>"},templateSelection:function(e){return e.title||e.text}},t)),e.closest(".vp-select2-taxonomies-ajax").length&&(t=o.extend({minimumInputLength:1,ajax:{url:l,dataType:"json",delay:250,data:function(e){return{action:"vp_find_taxonomies",q:e.term,post_type:!!a&&a.val(),nonce:c.nonce}},processResults:function(e){var t=[];return e&&Object.keys(e).forEach(function(a){t.push({text:a,children:e[a]})}),{results:t}},cache:!0}},t)),e.select2(t).data("select2").$dropdown.addClass("select2-vp-container")});var T=o(".vp-control-gallery"),S=0;if(o.fn.sortable&&(T.each(function(){var e=o(this),t=e.children(".vp-control-gallery-items-default");e.children(".vp-control-gallery-items").sortable({animation:150,draggable:".vp-control-gallery-items-img",onUpdate:function(){n(e)}}),e.on("click",".vp-control-gallery-items-remove",function(t){t.preventDefault(),o(this).parent().remove(),n(e)}),e.on("click",".vp-control-gallery-items-add",function(a){a.preventDefault();var i=e.data("wp-frame");return i?void i.open():wp.media?(i=wp.media({title:"Select or Upload Images",button:{text:"Use this images"},multiple:!0,library:{type:"image"}}),e.data("wp-frame",i),i.on("select",function(){var a=i.state().get("selection").models;a&&a.length&&(a.forEach(function(a){var n=a.changed.url;a.changed.sizes&&a.changed.sizes.thumbnail&&(n=a.changed.sizes.thumbnail.url);var i=t.children().clone();i.attr("data-image-id",a.id),i.children("img").attr("src",n),i.find('[data-meta="width"]').html(a.changed.width),i.find('[data-meta="height"]').html(a.changed.height),i.find('[data-meta="filename"]').html(a.changed.filename),i.find('[data-meta="editLink"]').html(a.changed.editLink),i.find('[data-meta="filesizeHumanReadable"]').html(a.changed.filesizeHumanReadable),e.find(".vp-control-gallery-items-add").before(i)}),n(e))}),void i.open()):void console.error("Can't access wp.media object.")}),e.on("click",".vp-control-gallery-items-img",function(t){t.preventDefault(),r(e,o(this).attr("data-image-id"))});var a=void 0;e.on("change input",".vp-control-gallery-additional-data [name]",function(){clearTimeout(a),a=setTimeout(function(){var t=e.children(".vp-control-gallery-additional-data"),a=e.children("textarea").attr("name"),r=e.children(".vp-control-gallery-items").find(".vp-control-gallery-items-img.active").attr("data-image-id");if(r){var l=e.children(".vp-control-gallery-items").find('[data-image-id="'+r+'"]');t.find('[name*="'+a+'_additional_"]').each(function(){var e=o(this).attr("name").replace(a+"_additional_","").replace("[]",""),t=o(this).val()||"";"object"===(void 0===t?"undefined":i(t))&&(t=JSON.stringify(t)),l.find('[data-additional="'+e+'"]').html(t||"")}),n(e)}},200)})}),T.length)){var E=T.children(".vp-control-gallery-additional-data");o(document).on("mousedown",function(e){if(S){var t=e.target;o(t).closest(".vp-control-gallery-additional-data, .vp-control-gallery-items-img, .select2-vp-container").length||(E.removeClass("active"),T.children(".vp-control-gallery-items").find(".vp-control-gallery-items-img.active").removeClass("active"),S=T.find(".vp-control-gallery-additional-data.active").length)}})}var z=o('[name="vp_custom_css"]'),A=!1,L=!0;if(void 0!==d&&z.length){if(c&&c.classnames){var O=d.hint.css;d.hint.css=function(e){var t=e.getCursor(),a=O(e)||{from:t,to:e.getCursor(),list:[]},n=e.getTokenAt(t);return"top"===n.state.state&&0===n.string.indexOf(".")&&(a={from:d.Pos(t.line,n.start),to:d.Pos(t.line,n.end),list:[]},c.classnames.forEach(function(e){-1!==e.indexOf(n.string)&&a.list.push(e)})),a}}var $=d.fromTextArea(z[0],{mode:"css",theme:"eclipse",indentUnit:4,autoCloseTags:!0,autoCloseBrackets:!0,matchBrackets:!0,foldGutter:!0,lint:{options:{errors:!0,"box-model":!0,"display-property-grouping":!0,"duplicate-properties":!0,"known-properties":!0,"outline-none":!0},onUpdateLinting:function(e,t,a){var n=[];e.forEach(function(e){"error"===e.severity&&n.push(e)}),a.vcLintErrors=n,A||s(a.vcLintErrors,!0)}},lineNumbers:!0,lineWrapping:!0,scrollPastEnd:!0,emmet_active:!0,emmet:!0,styleActiveLine:!0,continueComments:!0,scrollbarStyle:"simple",extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-/":"toggleComment","Cmd-/":"toggleComment","Alt-F":"findPersistent"},gutters:["CodeMirror-lint-markers","CodeMirror-linenumbers","CodeMirror-foldgutter"]});p($),z.data("CodeMirrorInstance",$),$.on("change",function(){$.save(),z.change()}),$.on("keyup",function(e,t){var a=/^[a-zA-Z]$/.test(t.key);if(!e.state.completionActive||!a){var n=e.getTokenAt(e.getCursor());if("string"!==n.type&&"comment"!==n.type){var i=e.doc.getLine(e.doc.getCursor().line).substr(0,e.doc.getCursor().ch);(a||":"===t.key||" "===t.key&&/:\s+$/.test(i))&&e.showHint({completeSingle:!1})}}})}var M=!1;v.on("click","#publish:not(.disabled)",function(e){if(M=!0,!A){var t=o(this),a=z.length&&z.data("CodeMirrorInstance");a&&a.vcLintErrors&&a.vcLintErrors.length&&(e.preventDefault(),t.addClass("disabled button-disabled button-primary-disabled"),setTimeout(function(){t.removeClass("disabled button-disabled button-primary-disabled")},1500),s(a.vcLintErrors,!1),o("html,body").animate({scrollTop:o("#vp_custom_css").offset().top-100},300),a.focus(),a.setCursor(a.vcLintErrors[0].from.line))}});var P=u.serialize();o(window).on("beforeunload",function(){return M?void(M=!1):P!==u.serialize()||void 0}),v.on("change","#vp_custom_css_notice_prevent",function(){A=!0,o(this).closest(".notice").slideUp()})}}()},9:function(e,t,a){e.exports=a(10)}});