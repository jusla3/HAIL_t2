/*!
 * Name    : Visual Portfolio
 * Version : 1.3.0
 * Author  : nK https://nkdev.info
 */
!function(t){"use strict";function i(){o=e.width(),a=e.height()}var e=t(window),o=0,a=0;i(),e.on("resize load orientationchange",i),"undefined"!=typeof objectFitImages&&objectFitImages();var r=function(){return function(t,i){var e=this;e.$item=t;for(var o=t[0].className.split(/\s+/),a=0;a<o.length;a++)o[a]&&/^vp-uid-/.test(o[a])&&(e.uid=o[a].replace(/^vp-uid-/,"")),o[a]&&/^vp-id-/.test(o[a])&&(e.id=o[a].replace(/^vp-id-/,""));e.uid?(e.$items_wrap=t.find(".vp-portfolio__items"),e.$pagination=t.find(".vp-portfolio__pagination-wrap"),e.$filter=t.find(".vp-portfolio__filter-wrap"),e.id&&(e.$filter=e.$filter.add(".vp-single-filter.vp-id-"+e.id+" .vp-portfolio__filter-wrap")),e.userOptions=i,e.firstRun=!0,e.init()):console.error(VPData.__.couldnt_retrieve_vp)}}();r.prototype.emitEvent=function(t,i){i=i?[this].concat(i):[this],this.$item.trigger(t+".vp.vp-uid-"+this.uid,i)},r.prototype.init=function(){var i=this;i.firstRun||i.destroy(),i.destroyed=!1,i.initOptions(),i.initEvents(),i.initLayout(),i.initCustomColors(),i.initPhotoswipe(),i.$items_wrap.imagesLoaded(function(){i.$item.addClass("vp-portfolio__ready"),i.id&&t(".vp-single-filter.vp-id-"+i.id).addClass("vp-single-filter__ready"),i.initIsotope(),i.initJustifiedGallery(),i.emitEvent("imagesLoaded")}),i.emitEvent("init"),i.firstRun=!1},r.prototype.destroy=function(){var i=this;i.$item.removeClass("vp-portfolio__ready"),i.id&&t(".vp-single-filter.vp-id-"+i.id).removeClass("vp-single-filter__ready"),i.destroyEvents(),i.removeStyle(),i.renderStyle(),i.destroyPhotoswipe(),i.destroyIsotope(),i.destroyJustifiedGallery(),i.emitEvent("destroy"),i.destroyed=!0};var p={};r.prototype.addStyle=function(i,e,o){o=o||"";var a=this,r=a.uid;void 0===p[r]&&(p[r]={}),void 0===p[r][o]&&(p[r][o]={}),void 0===p[r][o][i]&&(p[r][o][i]={}),p[r][o][i]=t.extend(p[r][o][i],e),a.emitEvent("addStyle",[i,e,o,p])},r.prototype.removeStyle=function(t,i,e){e=e||"";var o=this,a=o.uid;void 0===p[a]||t||(p[a]={}),void 0!==p[a]&&void 0!==p[a][e]&&void 0!==p[a][e][t]&&t&&delete p[a][e][t],o.emitEvent("removeStyle",[t,i,p])},r.prototype.renderStyle=function(){var i=this,e=i.uid,o="";if(void 0!==p[e])for(var a in p[e]){a&&(o+="@media "+a+" {");for(var r in p[e][a]){o+=".vp-uid-"+e+" "+r+" {";for(var s in p[e][a][r])o+=s+":"+p[e][a][r][s]+";";o+="}"}a&&(o+="}")}var n=t("#vp-style-"+e);n.length||(n=t("<style>").attr("id","vp-style-"+e).appendTo("head")),n.html(o),i.emitEvent("renderStyle",[o,p,n])},r.prototype.firstToLowerCase=function(t){return t.substr(0,1).toLowerCase()+t.substr(1)},r.prototype.initOptions=function(i){var e=this;e.defaults={layout:"tile",itemsGap:0,tilesType:"3|1,1|",masonryColumns:3,pagination:"load-more"},i&&(e.userOptions=i);var o=e.$item[0].dataset,a={};for(var r in o)r&&"vp"===r.substring(0,2)&&(a[e.firstToLowerCase(r.substring(2))]=o[r]);e.options=t.extend({},e.defaults,a,e.userOptions),e.emitEvent("initOptions")};var s=function(t,i,e,o){var a=(o.x-e.x)*(t.y-e.y)-(o.y-e.y)*(t.x-e.x),r=(o.x-e.x)*(i.y-e.y)-(o.y-e.y)*(i.x-e.x),p=(i.x-t.x)*(e.y-t.y)-(i.y-t.y)*(e.x-t.x),s=(i.x-t.x)*(o.y-t.y)-(i.y-t.y)*(o.x-t.x);return a*r<=0&&p*s<=0};r.prototype.initEvents=function(){function i(){var t=p.$item[0].getBoundingClientRect(),i=t.left,e=o-t.right,a=parseFloat(p.$item.css("margin-left")||0),r=parseFloat(p.$item.css("margin-right")||0);p.$item.css({"margin-left":a-i,"margin-right":r-e})}function r(){var t=p.$item[0].getBoundingClientRect();t.bottom>0&&t.bottom-v<=a&&p.loadNewItems(p.options.nextPageUrl,!1,function(){r()})}var p=this,n=".vp.vp-uid-"+p.uid;if(p.$item.hasClass("vp-portfolio__stretch")&&(e.on("load"+n+" resize"+n+" orientationchange"+n,function(){i()}),i()),"fly"===p.options.itemsStyle){var l={};e.on("mousemove"+n,function(t){l={x:t.clientX,y:t.clientY}}),p.$item.on("mouseenter"+n+" mouseleave"+n,".vp-portfolio__item",function(i){var e=t(this),o=e[0].getBoundingClientRect(),a=e.find(".vp-portfolio__item-overlay"),r="mouseenter"===i.type,p="0%",n="0%",d={x:i.clientX,y:i.clientY},v=s({x:o.left,y:o.top},{x:o.left+o.width,y:o.top},d,l),f=s({x:o.left,y:o.top+o.height},{x:o.left+o.width,y:o.top+o.height},d,l),m=s({x:o.left,y:o.top},{x:o.left,y:o.top+o.height},d,l),_=s({x:o.left+o.width,y:o.top},{x:o.left+o.width,y:o.top+o.height},d,l);if(!(v||f||m||_)){var c=(o.width/2-d.x+o.left)/(o.width/2),u=(o.height/2-d.y+o.top)/(o.height/2);Math.abs(c)>Math.abs(u)?c>0?m=!0:_=!0:u>0?v=!0:f=!0}v?n="-10"+n:f?n="10"+n:m?p="-10"+p:_&&(p="10"+p),r&&(a.css({transition:"none",transform:"translateX("+p+") translateY("+n+") translateZ(0)"}),a[0].offsetHeight),a.css({transition:".2s transform ease-in-out",transform:"translateX("+(r?"0%":p)+") translateY("+(r?"0%":n)+") translateZ(0)"})})}p.$filter.on("click"+n,".vp-filter .vp-filter__item a",function(i){i.preventDefault();var e=t(this);p.loading||e.closest(".vp-filter__item").addClass("vp-filter__item-active").siblings().removeClass("vp-filter__item-active"),p.loadNewItems(e.attr("href"),!0)}),p.$item.on("click"+n,".vp-pagination .vp-pagination__item a",function(i){i.preventDefault();var e=t(this);e.hasClass("vp-pagination__no-more")&&"paged"!==p.options.pagination||p.loadNewItems(e.attr("href"),"paged"===p.options.pagination)}),p.$item.on("click"+n,".vp-portfolio__items .vp-portfolio__item-meta-category a",function(i){i.preventDefault(),i.stopPropagation(),p.loadNewItems(t(this).attr("href"),!0)});var d,v=250;"infinite"===p.options.pagination&&(e.on("load"+n+" scroll"+n+" resize"+n+" orientationchange"+n,function(){clearTimeout(d),d=setTimeout(function(){r()},60)}),r()),p.emitEvent("initEvents")},r.prototype.destroyEvents=function(){var t=this,i=".vp.vp-uid-"+t.uid;t.$item.off(i),t.$filter.off(i),e.off(i),t.emitEvent("destroyEvents")},r.prototype.getTilesSettings=function(){var t=this.options.tilesType.split(/[:|]/);return void 0===t[t.length-1]||t[t.length-1]||t.pop(),t},r.prototype.initLayout=function(){var t=this,i=[576,768,992,1200];if(t.options.layout)switch(t.options.layout){case"tiles":var e=t.getTilesSettings(),o=parseInt(e[0],10);if(e.shift(),o=o||1,t.addStyle(".vp-portfolio__item-wrap",{width:100/o+"%"}),e&&e.length)for(var a=0;a<e.length;a++){var r=e[a].split(","),p=parseFloat(r[0])||1,s=parseFloat(r[1])||1,n=".vp-portfolio__item-wrap";e.length>1&&(n+=":nth-of-type("+e.length+"n+"+(a+1)+")"),p&&1!==p&&t.addStyle(n,{width:100*p/o+"%"}),t.addStyle(n+" .vp-portfolio__item-img-wrap:before",{"margin-top":100*s+"%"})}for(l=o;l>0;l--)void 0!==i[l-1]&&(t.addStyle(".vp-portfolio__item-wrap",{width:100/l+"%"},"screen and (max-width: "+i[l-1]+"px)"),t.addStyle(".vp-portfolio__item-wrap:nth-of-type(n)",{width:100/l+"%"},"screen and (max-width: "+i[l-1]+"px)"));break;case"masonry":t.addStyle(".vp-portfolio__item-wrap",{width:100/t.options.masonryColumns+"%"});for(var l=t.options.masonryColumns;l>0;l--)void 0!==i[l-1]&&t.addStyle(".vp-portfolio__item-wrap",{width:100/l+"%"},"screen and (max-width: "+i[l-1]+"px)")}var d=parseInt(t.options.itemsGap,10);if(d&&("tiles"===t.options.layout||"masonry"===t.options.layout)){t.addStyle(".vp-portfolio__items",{"margin-left":"-"+d+"px","margin-top":"-"+d+"px"});var v=d+"px";t.addStyle(".vp-portfolio__item-wrap .vp-portfolio__item",{"margin-left":v,"margin-top":v}),"tiles"===t.options.layout&&(t.addStyle(".vp-portfolio__item-wrap .vp-portfolio__item-img-wrap",{"margin-left":"-"+v,"margin-top":"-"+v}),t.addStyle(".vp-portfolio__item-wrap .vp-portfolio__item-img",{left:v,top:v}))}t.renderStyle(),t.emitEvent("initLayout")},r.prototype.initCustomColors=function(){var i=this;i.$item.find("[data-vp-bg-color]").each(function(){var e=t(this).attr("data-vp-bg-color");i.addStyle('[data-vp-bg-color="'+e+'"]',{"background-color":e+" !important"})}),i.$item.find("[data-vp-text-color]").each(function(){var e=t(this).attr("data-vp-text-color");i.addStyle('[data-vp-text-color="'+e+'"]',{color:e+" !important"})}),i.renderStyle(),i.emitEvent("initCustomColors")},r.prototype.initIsotope=function(t){var i=this;"tiles"!==i.options.layout&&"masonry"!==i.options.layout||(i.$items_wrap.isotope(t||{itemSelector:".vp-portfolio__item-wrap",layoutMode:"masonry",transitionDuration:"0.3s",percentPosition:!0}),i.emitEvent("initIsotope",[t]))},r.prototype.destroyIsotope=function(){var t=this;t.$items_wrap.data("isotope")&&(t.$items_wrap.isotope("destroy"),t.emitEvent("destroyIsotope"))},r.prototype.initJustifiedGallery=function(){var t=this;"justified"===t.options.layout&&(t.$items_wrap.justifiedGallery({lastRow:"justify",margins:t.options.itemsGap||0,border:0,selector:".vp-portfolio__item-wrap",waitThumbnailsLoad:!1}),t.emitEvent("initJustifiedGallery"))},r.prototype.destroyJustifiedGallery=function(){var i=this,e=i.$items_wrap.data("jg.controller");e&&(clearInterval(e.checkWidthIntervalId),t.each(e.entries,function(i,o){var a=t(o);a.css("width",""),a.css("height",""),a.css("top",""),a.css("left",""),a.data("jg.loaded",void 0),a.removeClass("jg-entry");var r=a.find(".vp-portfolio__item-img img");r.length&&(r.css("width",""),r.css("height",""),r.css("margin-left",""),r.css("margin-top",""),r.attr("src",r.data("jg.originalSrc")),r.data("jg.originalSrc",void 0)),e.removeCaptionEventsHandlers(a);var p=e.captionFromEntry(a);a.data("jg.createdCaption")?(a.data("jg.createdCaption",void 0),null!==p&&p.remove()):null!==p&&p.fadeTo(0,1)}),e.$gallery.css("height",""),e.$gallery.removeClass("justified-gallery"),e.$gallery.data("jg.controller",void 0),i.emitEvent("destroyJustifiedGallery"))},r.prototype.initPhotoswipe=function(){var i=this;if("undefined"!=typeof PhotoSwipe&&i.options.itemsClickAction&&"popup_gallery"===i.options.itemsClickAction){var e=VPData.settings_popup_gallery;if(!i.$item.closest("#vp_preview").length){if(!t(".vp-pswp").length){var o='<div class="pswp vp-pswp vp-pswp-uid-'+i.uid+'" tabindex="-1" role="dialog" aria-hidden="true">   <div class="pswp__bg"></div>   <div class="pswp__scroll-wrap">      <div class="pswp__container">          <div class="pswp__item"></div>          <div class="pswp__item"></div>          <div class="pswp__item"></div>      </div>      <div class="pswp__ui pswp__ui--hidden">          <div class="pswp__top-bar">              <div class="pswp__counter"></div>              <a class="pswp__button pswp__button--close" title="'+VPData.__.pswp_close+'"></a>              <a class="pswp__button pswp__button--share" title="'+VPData.__.pswp_share+'"></a>              <a class="pswp__button pswp__button--fs" title="'+VPData.__.pswp_fs+'"></a>              <a class="pswp__button pswp__button--zoom" title="'+VPData.__.pswp_zoom+'"></a>          </div>          <div class="pswp__preloader">              <div class="pswp__preloader__icn">                  <div class="pswp__preloader__cut">                      <div class="pswp__preloader__donut"></div>                  </div>              </div>          </div>          <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">              <div class="pswp__share-tooltip"></div>          </div>          <a class="pswp__button pswp__button--arrow--left" title="'+VPData.__.pswp_prev+'"></a>          <a class="pswp__button pswp__button--arrow--right" title="'+VPData.__.pswp_next+'"></a>          <div class="pswp__caption">              <div class="pswp__caption__center"></div>          </div>      </div>   </div></div>';t("body").append(o)}var a=function(i){var e,o,a,r,p,s=[];return t(i).find(".vp-portfolio__item-wrap").each(function(){if(e=t(this).find(".vp-portfolio__item-popup"),o=(e.attr("data-vp-popup-img-size")||"1920x1080").split("x"),a=(e.attr("data-vp-popup-video-size")||"1920x1080").split("x"),p=e.attr("data-vp-popup-video"))r={html:p,vw:parseInt(a[0],10),vh:parseInt(a[1],10)};else{r={src:e.attr("data-vp-popup-img"),w:parseInt(o[0],10),h:parseInt(o[1],10)};var i=e.html();i&&(r.title=i),r.el=this;var n=e.attr("data-vp-popup-md-img")||r.src;n&&(o=(e.attr("data-vp-popup-md-img-size")||e.attr("data-vp-popup-img-size")||"1920x1080").split("x"),r.m={src:n,w:parseInt(o[0],10),h:parseInt(o[1],10)}),r.o={src:r.src,w:r.w,h:r.h}}s.push(r)}),s},r=function(i,e){if(void 0!==e){var o,a=i.viewportSize.x*window.devicePixelRatio,p=i.viewportSize.y*window.devicePixelRatio,s=e.vw/e.vh,n=t(e.container),l=i.options.barsSize,d=0,v=0;l&&(d=l.top&&"auto"!==l.top?l.top:0,v=l.bottom&&"auto"!==l.bottom?l.bottom:0),o=s>a/(p-=d+v)?a:p*s,n.find(".vp-pswp-video").css("max-width",o),n.css({top:d,bottom:v})}else i&&i.itemHolders.length&&i.itemHolders.forEach(function(t){t.item&&t.item.html&&r(i,t.item)})},p=function(o,p,s,n){var l,d,v,f=t(".vp-pswp")[0];if(v=a(p),d={captionAndToolbarShowEmptyCaptions:!1,closeEl:e.show_close_button,captionEl:e.show_caption,fullscreenEl:e.show_fullscreen_button,zoomEl:e.show_zoom_button,shareEl:e.show_share_button,counterEl:e.show_counter,arrowEl:e.show_arrows,shareButtons:[{id:"facebook",label:VPData.__.pswp_share_fb,url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:VPData.__.pswp_share_tw,url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:VPData.__.pswp_share_pin,url:"https://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"}],bgOpacity:1,tapToClose:!0,tapToToggleControls:!1,showHideOpacity:!0,galleryUID:i.uid},n)if(d.galleryPIDs){for(var m=0;m<v.length;m++)if(v[m].pid===o){d.index=m;break}}else d.index=parseInt(o,10)-1;else d.index=parseInt(o,10);if(!isNaN(d.index)){s&&(d.showAnimationDuration=0);var _,c,u=!1,h=!0;(l=new PhotoSwipe(f,PhotoSwipeUI_Default,v,d)).listen("beforeResize",function(){_=l.viewportSize.x*window.devicePixelRatio,u&&_<1e3?(u=!1,c=!0):!u&&_>=1e3&&(u=!0,c=!0),c&&!h&&l.invalidateCurrItems(),h&&(h=!1),c=!1}),l.listen("gettingData",function(t,i){i.html||(u?(i.src=i.o.src,i.w=i.o.w,i.h=i.o.h):(i.src=i.m.src,i.w=i.m.w,i.h=i.m.h))}),l.listen("resize",function(){r(this)}),l.listen("afterChange",function(){r(this)}),l.init()}};i.$item.on("click.vp.vp-uid-"+i.uid,".vp-portfolio__item",function(t){t.preventDefault();var e=0,o=this;i.$item.find(".vp-portfolio__item").each(function(t){return this!==o||(e=t,!1)}),p(e,i.$item[0])});var s=function(){var t=window.location.hash.substring(1),i={};if(t.length<5)return i;for(var e=t.split("&"),o=0;o<e.length;o++)if(e[o]){var a=e[o].split("=");a.length<2||(i[a[0]]=a[1])}return i}();s.pid&&s.gid===i.uid&&p(s.pid,i.$item[0],!0,!0)}}},r.prototype.destroyPhotoswipe=function(){var i=this;i.$item.off("click.vp.vp-uid-"+i.uid),t(".vp-pswp-uid-"+i.uid).remove()},r.prototype.addItems=function(t,i){var e=this;if(e.$items_wrap.data("isotope")){if(i){var o=e.$items_wrap.find(".vp-portfolio__item-wrap");e.$items_wrap.isotope("remove",o),e.$items_wrap.prepend(t).isotope("prepended",t)}else e.$items_wrap.append(t).isotope("appended",t);e.$items_wrap.imagesLoaded(function(){e.initIsotope("layout")})}e.emitEvent("addItems",[t,i])},r.prototype.removeItems=function(t){var i=this;i.$items_wrap.data("isotope")&&i.$items_wrap.isotope("remove",t),i.emitEvent("removeItems",[t])},r.prototype.loadNewItems=function(i,e,o){var a=this;!a.loading&&i&&(a.loading=!0,a.$item.addClass("vp-portfolio__loading"),a.emitEvent("startLoadingNewItems",[i]),t.get(i,{},function(i){i=i.replace("<body",'<body><div id="vp-infinite-load-body"').replace("</body>","</div></body>");var r=t(i).filter("#vp-infinite-load-body"),p=r.find(".vp-portfolio.vp-uid-"+a.uid);if(p.length){var s=p.find(".vp-portfolio__items").html();a.$filter.length&&a.$filter.each(function(){var i=t(this),e="";e=i.parent().hasClass("vp-single-filter")?r.find('[class="'+i.parent().attr("class").replace(" vp-single-filter__ready","")+'"] .vp-portfolio__filter-wrap').html():p.find(".vp-portfolio__filter-wrap").html(),i.html(e)}),a.$pagination.length&&a.$pagination.html(p.find(".vp-portfolio__pagination-wrap").html()),a.addItems(t(s),e),a.emitEvent("loadedNewItems",[p,p,i])}var n=p.attr("data-vp-next-page-url");a.options.nextPageUrl=n,a.$item.attr("data-vp-next-page-url",n),a.$item.removeClass("vp-portfolio__loading"),a.loading=!1,a.emitEvent("endLoadingNewItems"),a.initCustomColors(),o&&o()}))};var n=function(i){var e,o=Array.prototype.slice.call(arguments,1);return this.each(function(){void 0===e&&("object"==typeof i||void 0===i?this.vp||(this.vp=new r(t(this),i)):this.vp&&(e=this.vp[i].apply(this.vp,o)))}),void 0!==e?e:this};n.constructor=r;var l=jQuery.fn.vp;jQuery.fn.vp=n,jQuery.fn.vp.noConflict=function(){return jQuery.fn.vp=l,this},t(function(){t(".vp-portfolio").vp()})}(jQuery);